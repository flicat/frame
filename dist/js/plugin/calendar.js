define("calendar",["selector","public"],function(require,exports){var a=require("selector"),b=require("public"),c=function(a){if(this.option={target:null,event:"focus",min:"",max:"",format:"Y-M-D"},"[object Object]"==={}.toString.call(a))for(var b in a)a.hasOwnProperty(b)&&a[b]&&(this.option[b]=a[b]);this.selector=null,this.dateArr=[],this.init()};return c.prototype={constructor:c,setDefault:function(a,b,c){var d=this,e=d.selector.defaultValue;a&&b&&c&&(e.length=0,d.dateArr.forEach(function(d,f){d.name==a&&(e.push(f),d.list.forEach(function(a,d){a.name==b&&(e.push(d),a.list.forEach(function(a,b){a.name==c&&e.push(b)}))}))}))},show:function(){this.selector.show()},hide:function(){this.selector.hide()},init:function(){var c=this,d=c.option,e=d.target;if(e){var f,g,h,i,j,k,l={data:c.dateArr,title:["年","月","日"],display:"name",confirm:function(a){e.value=b.getDateString(a[0].name+"/"+a[1].name+"/"+a[2].name,d.format),e.trigger("input"),e.trigger("change")}},m=b.getDateFromString(d.min),n=b.getDateFromString(d.max);m||(m=new Date,m.setFullYear(m.getFullYear()-100)),n||(n=new Date,n.setFullYear(Number(n.getFullYear())+100)),f=m.getFullYear(),g=Number(m.getMonth())+1,h=m.getDate(),i=n.getFullYear(),j=Number(n.getMonth())+1,k=n.getDate();for(var o=f;o<=i;o++){for(var p={name:o,list:[]},q=o==f?g:1,r=o==i?j:12;q<=r;q++){for(var s={name:q,list:[]},t=o==f&&q==g?h:1,u=o==i&&q==j?k:b.getMonthDays(o,q);t<=u;t++)s.list.push({name:t});p.list.push(s)}l.data.push(p)}c.selector=new a(l),e.addEventListener(d.event,function(a){a.preventDefault(),a.stopPropagation();var d=b.getDateFromString(e.value)||new Date;c.setDefault(d.getFullYear(),Number(d.getMonth())+1,d.getDate()),c.show()})}}},c});