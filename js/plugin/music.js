define(function(require,exports){var a=function(a,b,c){var d=function(e){a.removeEventListener(b,d,!1),c.call(this,e)};a.addEventListener(b,d,!1)},b=/i(Phone|P(o|a)d)/.test(navigator.userAgent),c=Number(sessionStorage.music_current_time)||0,d=function(){var a=document.createElement("i");return a.className="icon-music",document.body.appendChild(a),a};return function(e,f,g){var h=!1,i=new Audio;i.loop=!!f,i.autoplay=!1,i.previousSrc=e,i.src=e,i.load();var j=d(),k=function(){i.play()},l=function(){i.pause()},m=function(){h=!0,j.classList.add("icon-music-animation")},n=function(){h=!1,j.classList.remove("icon-music-animation")};return i.addEventListener("playing",m,!1),i.addEventListener("ended",n,!1),i.addEventListener("pause",n,!1),i.addEventListener("loadeddata",function(){c?b?i.previousTime=c:i.currentTime=c:null},!1),g&&(k(),b&&a(document,"touchstart",k)),j.addEventListener("touchend",function(a){a.stopPropagation(),a.preventDefault(),h?l():k()},!1),window.addEventListener("beforeunload",function(){b?sessionStorage.music_current_time=i.previousTime:sessionStorage.music_current_time=i.currentTime}),{play:k,pause:l}}});