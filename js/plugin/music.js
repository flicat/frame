define(function(require,exports){var a=function(a,b,c){var d=function(e){a.removeEventListener(b,d,!1),c.call(this,e)};a.addEventListener(b,d,!1)},b=/i(Phone|P(o|a)d)/.test(navigator.userAgent),c=Number(sessionStorage.music_current_time)||0,d=sessionStorage.music_play_state,e=function(){var a=document.createElement("i");return a.className="icon-music",document.body.appendChild(a),a};return function(f,g,h){var i={isPlay:!1,play:function(){i.isPlay=!0,j.play()},pause:function(){i.isPlay=!1,j.pause()},stop:function(){i.isPlay=!1,j.pause(),j.previousTime=0,j.currentTime=0},onPlay:function(){},onStop:function(){}},j=new Audio(f);j.loop=!!g,j.autoplay=!1;var k=e(),l=function(){k.classList.add("icon-music-animation"),i.onPlay()},m=function(){k.classList.remove("icon-music-animation"),i.onStop()},n=function(){c?b?j.previousTime=c:j.currentTime=c:null};return j.addEventListener("playing",l,!1),j.addEventListener("ended",m,!1),j.addEventListener("pause",m,!1),j.addEventListener("loadeddata",n,!1),d&&"play"!==d||!h||(i.play(),b&&a(document,"touchstart",i.play)),k.addEventListener("touchend",function(a){a.stopPropagation(),a.preventDefault(),sessionStorage.music_play_state=i.isPlay?"stop":"play",i.isPlay?i.stop():i.play()},!1),window.addEventListener("beforeunload",function(){b?sessionStorage.music_current_time=j.previousTime:sessionStorage.music_current_time=j.currentTime,j.pause(),j=null}),i}});