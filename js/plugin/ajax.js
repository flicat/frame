define(function(require,exports){var a=function(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])},b=function(b){var c=[];return b=b||{},a(b,function(a,b){c.push(encodeURIComponent(a)+"="+encodeURIComponent(b))}),c.join("&")},c=function(a,c){var d=b(c);return d?(a=a.split("#")[0],/\?/gi.test(a)?a+"&"+d:a+"?"+d):a},d=function(d){var e,f,g=new XMLHttpRequest,h=!1;if(g.onreadystatechange=function(){if(4===g.readyState)if(g.onreadystatechange=null,f&&clearTimeout(f),g.status>=200&&g.status<300||304==g.status){var a;try{a=g.response||g.responseText}catch(b){a=""}h&&"json"==d.dataType&&(a=JSON.parse(a)),d.success(a)}else d.error(g)},"[object FormData]"==={}.toString.call(d.data)?(d.type="POST",e=d.data):"post"===String(d.type).toLowerCase()?(d.type="POST",e=b(d.data)):(d.type="GET",d.url=c(d.url,d.data),e=null),d.dataType)try{g.responseType=d.dataType,g.responseType&&g.responseType==d.dataType||(h=!0)}catch(i){h=!0}if(g.open(d.type,d.url,!!d.async),d.timeout=Number(d.timeout)||0,d.timeout&&d.timeout>0)try{g.timeout=d.timeout}catch(i){setTimeout(function(){g.abort()},d.timeout)}a(d.header,function(a,b){g.setRequestHeader(a,b)}),d.beforeSend(g),g.send(e)},e=function(a){var b=a.jsonp||"json_callback_"+Date.now(),d=document.createElement("script"),e=document.head||document.querySelector("head")||document.documentElement,f=a.data||{};f._="jsonp_"+Date.now(),f.callback=b,window[b]=function(c){window[b]=null,a.success(c)},d.async=!!a.async,d.charset="utf-8",d.src=c(a.url,f),d.onload=d.onreadystatechange=function(b,c){c||!d.readyState||/loaded|complete/.test(d.readyState)?(d.onload=d.onreadystatechange=null,d.parentNode&&d.parentNode.removeChild(d),d=null):a.error()},e.insertBefore(d,e.firstChild)},f={type:"GET",url:"",async:!0,timeout:null,data:{},header:{"Content-Type":"application/x-www-form-urlencoded"},dataType:"",jsonp:"",beforeSend:function(){},success:function(){},error:function(){}};return function(b){a(f,function(a,c){b[a]||(b[a]=c)}),"jsonp"===b.dataType?e(b):d(b)}});