define(function(require,exports){var a=function(a){var b=[];a=a||{};for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},b=function(b,c){var d=a(c);return d?(b=b.split("#")[0],/\?/gi.test(b)?b+"&"+d:b+"?"+d):b},c=function(c){var d,e=new XMLHttpRequest;e.onreadystatechange=function(){if(4===e.readyState)if(e.onreadystatechange=null,e.status>=200&&e.status<300||304==e.status){var a;if("json"===String(c.dataType).toLowerCase())try{a=JSON.parse(e.responseText)}catch(b){a={}}else a=e.responseText;c.success(a)}else c.error(e)},"get"===String(c.type).toLowerCase()?(c.type="GET",c.url=b(c.url,c.data),d=null):(c.type="POST",d=a(c.data)),e.open(c.type,c.url,!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send(d)},d=function(a){var c=a.jsonp||"json_callback_"+(new Date-0),d=document.createElement("script"),e=document.head||document.querySelector("head")||document.documentElement,f=a.data||{};f._="jsonp_"+(new Date-0),f.callback=c,window[c]=function(b){window[c]=null,a.success(b)},d.async=!0,d.charset="utf-8",d.src=b(a.url,f),d.onload=d.onreadystatechange=function(b,c){c||!d.readyState||/loaded|complete/.test(d.readyState)?(d.onload=d.onreadystatechange=null,d.parentNode&&d.parentNode.removeChild(d),d=null):a.error()},e.insertBefore(d,e.firstChild)},e={type:"GET",url:"",data:{},dataType:"json",jsonp:"",success:function(){},error:function(){}};return function(a){for(var b in e)e.hasOwnProperty(b)&&!a[b]&&(a[b]=e[b]);return"jsonp"===a.dataType?d(a):c(a)}});