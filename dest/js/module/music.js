define(function(require,exports){var a=function(a,b,c){var d=function(e){a.removeEventListener(b,d,!1),c.call(this,e)};a.addEventListener(b,d,!1)},b=/i(Phone|P(o|a)d)/.test(navigator.userAgent),c=!Number(sessionStorage.music_play_state),d=document.createElement("i"),e={play:null,stop:null,show:function(){d.style.display="block"},hide:function(){d.style.display="none"}};return window.addEventListener("load",function(){var f=new Audio;f.loop=!0,f.autoplay=!1,f.previousSrc=seajs.data.cwd+"audio/bg.mp3",f.src=seajs.data.cwd+"audio/bg.mp3",f.load();var g=function(){if(c){var a=Number(sessionStorage.music_current_time)||0;b?f.previousTime=a:f.currentTime=a,f.play()}};g(),(b||f.paused)&&a(document,"touchstart",g),window.addEventListener("beforeunload",function(){b?sessionStorage.music_current_time=f.previousTime:sessionStorage.music_current_time=f.currentTime}),d.addEventListener("touchend",function(a){a.stopPropagation(),a.preventDefault(),c=!c,sessionStorage.music_play_state=Number(!c),c?(d.classList.add("icon-music-animation"),g()):(d.classList.remove("icon-music-animation"),f.pause())},!1),d.className="icon-music"+(c?" icon-music-animation":""),document.body.appendChild(d),e.play=function(){f.play()},e.stop=function(){f.pause()}},!1),e});